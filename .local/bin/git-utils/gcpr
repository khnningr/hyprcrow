#!/usr/bin/env bash

set -euo pipefail

source login.sh

REPOS=(
	"${HOME}/hyprcrow/"
	"${HOME}/Wallpapers/"
	"${HOME}/kh-home"
)

actualizar_repositorio() {

	local REPOSITORIO="$1"

	echo -e "\n$REPOSITORIO"
	cd "$REPOSITORIO" || return 1

	git pull
  
	source commit.sh "${REPOSITORIO}"
  git push -u origin main
	echo "$REPOSITORIO actualizado correctamente."
}

mapfile -t ELEGIR_REPOS < <(printf '%s\n' "${REPOS[@]}" |
	gum choose --no-limit \
		--header 'Seleccione los repositorios para actualizar: ')

for REPOSITORIO in "${ELEGIR_REPOS[@]}"; do
	if [[ -n "$REPOSITORIO" ]]; then
		actualizar_repositorio "$REPOSITORIO"
	fi
done
